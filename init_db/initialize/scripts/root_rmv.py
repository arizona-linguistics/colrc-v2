import re
r = open('entries.txt', 'r')
f = open('fixed_entries.txt', 'w+')
for line in r.readlines():
    # remove root symbol
    line = re.sub('(.*)√(.*)√(.*)', r'\1\2\3', line)
    # seperate rootnumber into own categories
    if re.match(r'.*:::.*:::.*\d:::.*:::.*:::.*:::.*', line):
        line = re.sub(r'(.*:::.*:::.*)(\d):::(.*:::.*:::.*:::.*)', r'\1:::\2:::\3', line)
    else:
        line = re.sub(r'(.*:::.*:::.*):::(.*:::.*:::.*:::.*)', r'\1::::::\2', line)

    # special categories
    if re.match('.*:::.*:::.*:::.*:::.*:::.*:::.*::://', line):
        line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*)::://\s+(.*)', r'\1::://:::\2', line)

    elif re.match('.*:::.*:::.*:::.*:::.*:::.*:::[†‡§]', line):
        line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*):::([†‡§])(\s+[†‡§])?(//)?\s+(.*)', r'\1:::\2\3\4:::\5', line)

    else:
        line = re.sub('(.*:::.*:::.*:::.*:::.*:::.*):::(.*)', r'\1::::::\2', line)

    # seperate grammar categories from English translations
    if re.match(r'.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*\(.*', line):
        line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*)(\(.*)$', r'\1:::\2', line)
    else:
        line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*)', r'\1:::', line)
    # lit. translations
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(lit\..*\))[,.]+\s(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(lit\..*),\s([v][it]?.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(lit\..*),\s(adj.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(lit\..*),\s(n.*)', r'\1\2:::\3', line)
    # misc. adjustments
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(sg\).*\))(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(pl\).*\))(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(al\).*\))(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(me\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(to\).*),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(it\).*,.*),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(s\)\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(my\).*),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(sg.\).*\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(box\).*),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(cat\).*\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(low\).*\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(out\).*\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(mud\).*\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(set\).*\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(God\).*\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(big\)),(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(out\)),(.*)', r'\1\2:::\3', line)
    # inconsistent changes
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to be hurt, ache)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to become crippled, walk with a limp)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to hang as in a sack or on a line, band, belt)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to sew)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to root)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to be lush)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to break, shatter)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to be fat)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to flatten out blanket)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to go about)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to pretend to...)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to wrap string evenly)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to be lost)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(to borrow)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(excess)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(corrugated)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(marked)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(animal bite)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(at this moment)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(intentional or vain display of wealth)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(smog)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(as far as)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(standby)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(irresponsible)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(black and blue wound)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(cheat)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(talk)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(speak)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(left over)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(swell)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(several\.\.)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(broken)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(pile)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(prone)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(they)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(easily split)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(drive)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(responsible)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(adhere)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(stem\).*)(scratch with claws)(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(or.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(nuns.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(morally.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(habit.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(nature.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(something.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(He has nice manners, he is courtly),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*)(\(stem\)).*:::(\(a cover for the brain, ref. to stupidity\)),\s*(.*)', r'\1\3:::\2\4', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(name.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\([Hh]/.*\)?),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(refer.*\)),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(e.g.*\))[,.]\s*(to be just outside the door)?(.*)\n', r'\1\2\3:::\4\n', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(E.*),\s*(.*)', r'\1\2:::\3', line)
    line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(star\).*),\s*(.*)', r'\1\2:::\3', line)
    # line = re.sub(r'(.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*:::.*):::(\(b.*)(,)?\s*(.*)', r'\1\2:::\4', line)


    # elif re.match(r'(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*)\.\n', line):
    #     line = re.sub(r'(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*)\.\n', r'\1:::\2:::\3:::\4:::\5:::\6:::\7:::\8:::\9.:::\n' , line)
    # line = re.sub(r'^(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*):::(.*)\s+(\(.*)(?!.*:::)', r'\1:::\2:::\3:::\4:::\5:::\6:::\7:::\8:::\9:::\10', line)
    # handle vi tags that come before lit.
    # line = re.sub(r'')
    f.write(line)
